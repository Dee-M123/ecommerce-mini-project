version: 2

models:
  - name: dim_client
    description: Client dimension with anonymized PII.

    columns:
      - name: client_key
        description: Surrogate key for client.
        tests:
          - not_null
          - unique

      - name: client_id
        description: Natural key from source.
        tests:
          - not_null

      - name: email_hash
        description: MD5 hashed email for GDPR compliance.
        tests:
          - not_null

      - name: client_status_id
        description: Foreign key to dim_client_status.
        tests:
          - not_null
          - relationships:
              to: ref('dim_client_status')
              field: client_status_id
